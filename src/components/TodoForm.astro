---
import { Categories, db } from "astro:db"

const categories = await db.select().from(Categories)
---

<div>
  <!-- Category Form -->
  <div>
    <h1>Manage Categories</h1>
    <div class="form-container">
      <form method="POST" class="sub-form">
        <input type="hidden" name="formType" value="category" />
        <div>
          <label for="categoryName">Category Name</label>
          <input type="text" id="categoryName" name="name" required />
        </div>
        <button type="submit">Add Category</button>
      </form>
      <form method="POST" class="sub-form">
        <input type="hidden" name="formType" value="removeCategory" />
        <div>
          <label for="categoryId">Remove Category</label>
          <select id="categoryId" name="categoryId" required>
            <option value="">Select a category</option>
            {
              categories.map((category) => (
                <option value={category.id}>{category.name}</option>
              ))
            }
          </select>
        </div>
        <button type="submit">Remove Category</button>
      </form>
    </div>
  </div>
</div>

<style>
  .form-container {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 1.5rem;
    padding: 1rem;
    border: 2px solid var(--color-border);
    border-radius: 0.5rem;
  }

  .sub-form {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 1.5rem;
  }
</style>
