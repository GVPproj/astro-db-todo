---
import TodoList from "../components/TodoList.astro"
import TodoForm from "../components/TodoForm.astro"
import { handleFormSubmission } from "../utils/formHandler"
import BaseLayout from "../layouts/Base.astro"

if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData()
  await handleFormSubmission(formData)
  return Astro.redirect("/", 303)
}
---

<BaseLayout>
  <TodoForm />
  <TodoList />
</BaseLayout>
