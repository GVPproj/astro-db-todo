---
import { Categories, db } from "astro:db"

const categories = await db.select().from(Categories)
---

<!-- Todo Form -->
<form method="POST">
  <input type="hidden" name="formType" value="todo" />
  <div>
    <label for="name">Todo Name</label>
    <input type="text" id="name" name="name" required />
  </div>
  <div>
    <label for="categoryId">Category</label>
    <select id="categoryId" name="categoryId" required>
      <option value="">Select a category</option>
      {
        categories.map((category) => (
          <option value={category.id}>{category.name}</option>
        ))
      }
    </select>
  </div>
  <button type="submit">Add Todo</button>
</form>

<!-- Category Form -->
<form method="POST">
  <input type="hidden" name="formType" value="category" />
  <div>
    <label for="categoryName">Category Name</label>
    <input type="text" id="categoryName" name="name" required />
  </div>
  <button type="submit">Add Category</button>
</form>
